<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
  <title>Cardápio Bar - AFPESP Peruíbe II</title>
  
  <style>
    :root {
      --gold: #d4af37;
      --dark-brown: #1a0d0b;
      --paper: #fdfbf7;
      --black-bg: #050404;
      --font-serif: 'Cinzel', 'Georgia', serif;
      --font-sans: 'Lato', 'Helvetica Neue', Arial, sans-serif;
    }

    * { box-sizing: border-box; -webkit-tap-highlight-color: transparent; }
    
    html, body {
      margin: 0; padding: 0; height: 100%; width: 100%;
      background-color: var(--black-bg);
      overflow: hidden; overscroll-behavior: none;
      display: flex; flex-direction: column;
      font-family: var(--font-sans);
    }

    /* BARRA SUPERIOR */
    .top-bar {
      flex-shrink: 0; height: 65px; background: #000;
      display: flex; align-items: center; padding: 0 20px; z-index: 1000;
      border-bottom: 2px solid #222;
    }
    .top-bar .logo-container { height: 45px; display: flex; align-items: center; justify-content: center; min-width: 60px; }
    .top-bar img { height: 100%; width: auto; display: block; object-fit: contain; }
    .top-bar span { color: white; font-weight: bold; margin-left: 15px; font-size: 15px; letter-spacing: 0.5px; }

    .title-bar {
      flex-shrink: 0; background-color: #333436; padding: 6px 10px;
      text-align: center; z-index: 900;
    }
    .title-bar h1 { color: #00ff00; font-size: 11px; font-weight: bold; text-transform: uppercase; margin: 0; letter-spacing: 1px; }

    /* CONTAINER DO LIVRO */
    #root {
      flex-grow: 1; display: flex; flex-direction: column;
      align-items: center; justify-content: center; padding: 10px;
      position: relative; overflow: hidden;
    }

    #book-container {
      position: relative; 
      width: 96%; 
      max-width: 900px; 
      height: 60vh;
      aspect-ratio: 2 / 1.3;
      margin: auto; 
      perspective: 2500px;
      opacity: 0; 
      transition: opacity 0.5s ease-in-out;
      cursor: pointer; /* Indica que é clicável */
    }

    .book-wrapper {
      transform-style: preserve-3d; width: 100%; height: 100%; position: relative;
    }
    
    .sheet {
      position: absolute; top: 0; left: 50%; width: 50%; height: 100%;
      transform-origin: left;
      transition: transform 0.8s cubic-bezier(0.645, 0.045, 0.355, 1);
      transform-style: preserve-3d;
      will-change: transform, z-index;
    }

    .sheet.flipped { transform: rotateY(-180deg); }

    .face {
      position: absolute; inset: 0; width: 100%; height: 100%;
      backface-visibility: hidden; background-color: var(--paper);
      display: flex; flex-direction: column; overflow: hidden;
      box-shadow: inset 0 0 40px rgba(0,0,0,0.1);
      border: 1px solid rgba(0,0,0,0.05);
    }

    .face.back { transform: rotateY(180deg); }

    .bg-leather { 
      background-color: var(--dark-brown) !important; 
      background-image: url('https://www.transparenttextures.com/patterns/leather.png');
      color: var(--gold) !important;
    }

    .page-content { 
      padding: 20px 15px; 
      height: 100%; 
      overflow-y: auto; 
      display: flex; 
      flex-direction: column;
      scrollbar-width: thin;
      scrollbar-color: var(--gold) transparent;
    }
    
    .menu-section { margin-bottom: 15px; }
    .section-title {
      font-family: var(--font-serif); font-size: 13px; font-weight: bold;
      color: #222; border-bottom: 1px solid var(--gold);
      padding-bottom: 5px; margin-bottom: 12px; display: flex; align-items: center;
      gap: 8px; text-transform: uppercase; letter-spacing: 0.5px;
    }

    .menu-item { display: flex; justify-content: space-between; align-items: baseline; gap: 5px; margin-bottom: 8px; }
    .item-name { font-weight: 700; color: #111; font-size: 11px; flex: 1; line-height: 1.2; }
    .item-dots { flex-grow: 1; border-bottom: 1px dotted #bbb; margin-bottom: 3px; }
    .item-price { font-family: var(--font-serif); font-weight: 700; color: #000; font-size: 11px; white-space: nowrap; }

    /* CAPA */
    .cover-content {
      height: 100%; display: flex; flex-direction: column; align-items: center; justify-content: center;
      text-align: center; padding: 20px; border: 3px double var(--gold); margin: 15px;
      background: rgba(0,0,0,0.65);
    }
    .cover-content h1 { font-family: var(--font-serif); font-size: 28px; margin: 10px 0; letter-spacing: 2px; color: var(--gold); text-shadow: 2px 2px 4px black; }
    .cover-content p { font-family: var(--font-serif); font-size: 14px; text-transform: uppercase; letter-spacing: 1.5px; color: var(--gold); font-weight: bold; }
    .gold-line { width: 50px; height: 2px; background: var(--gold); margin: 15px 0; box-shadow: 0 0 8px var(--gold); }

    /* IMAGENS */
    .image-container { position: relative; height: 100%; background: var(--paper); overflow: hidden; }
    .image-el { width: 100%; height: 100%; object-fit: cover; display: block; }
    .image-caption {
      position: absolute; bottom: 0; left: 0; right: 0; 
      background: linear-gradient(transparent, rgba(0,0,0,0.9));
      padding: 40px 15px 20px; text-align: center; color: white;
      font-family: var(--font-serif); text-transform: uppercase; letter-spacing: 1px; font-size: 12px;
    }

    /* CONTROLES */
    .controls {
      display: flex; align-items: center; justify-content: center; gap: 20px;
      margin-top: 10px; padding-bottom: 15px;
    }
    .btn-nav {
      background: var(--dark-brown); color: var(--gold); border: 2px solid var(--gold);
      width: 48px; height: 48px; border-radius: 50%; cursor: pointer;
      display: flex; align-items: center; justify-content: center;
      box-shadow: 0 4px 12px rgba(0,0,0,0.6);
      transition: transform 0.2s;
    }
    .btn-nav:active { transform: scale(0.9); }
    .page-indicator { color: var(--gold); font-family: var(--font-serif); font-weight: bold; font-size: 14px; min-width: 60px; text-align: center; }

    @media (min-width: 641px) {
      .item-name, .item-price { font-size: 13px; }
      .section-title { font-size: 15px; }
      .cover-content h1 { font-size: 42px; }
      #book-container { height: 65vh; }
    }
  </style>
<script type="importmap">
{
  "imports": {
    "react": "https://esm.sh/react@^19.2.4"
  }
}
</script>
</head>
<body>

  <header class="top-bar">
    <div class="logo-container">
      <img src="https://i.ibb.co/R4jn242d/afpesp-2.png" alt="AFPESP" />
    </div>
    <span>AFPESP Peruíbe II</span>
  </header>

  <section class="title-bar">
    <h1>Cardápio Bar - AFPESP Peruíbe II</h1>
  </section>

  <div id="root">
    <!-- Adicionado onclick para virar as páginas clicando no livro -->
    <div id="book-container" onclick="handleBookClick(event)">
      <div id="book" class="book-wrapper"></div>
    </div>

    <div class="controls">
      <button class="btn-nav" onclick="prevPage()" aria-label="Voltar Página">
        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="3" stroke-linecap="round" stroke-linejoin="round"><polyline points="15 18 9 12 15 6"></polyline></svg>
      </button>
      <span id="page-indicator" class="page-indicator">1 / 1</span>
      <button class="btn-nav" onclick="nextPage()" aria-label="Próxima Página">
        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="3" stroke-linecap="round" stroke-linejoin="round"><polyline points="9 18 15 12 9 6"></polyline></svg>
      </button>
    </div>
  </div>

  <script>
    const SVGS = {
      'chef-hat': `<svg width="70" height="70" viewBox="0 0 24 24" fill="var(--gold)" xmlns="http://www.w3.org/2000/svg">
          <path d="M12 3C10.5 3 9.1 3.6 8.1 4.6C7.1 5.6 6.5 7 6.5 8.5C6.5 9 6.6 9.5 6.7 9.9C5.1 10.4 4 11.8 4 13.5C4 15.4 5.6 17 7.5 17H16.5C18.4 17 20 15.4 20 13.5C20 11.8 18.9 10.4 17.3 9.9C17.4 9.5 17.5 9 17.5 8.5C17.5 7 16.9 5.6 15.9 4.6C14.9 3.6 13.5 3 12 3ZM7 18H17V20C17 20.6 16.6 21 16 21H8C7.4 21 7 20.6 7 20V18Z"/>
        </svg>`,
      'heart': `<svg width="30" height="30" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5"><path d="M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z"></path></svg>`,
      'glass': `<svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M15.2 22H8.8a2 2 0 0 1-2-1.79L5 3h14l-1.81 17.21A2 2 0 0 1 15.2 22ZM6 12a5 5 0 0 1 6 0 5 5 0 0 0 6 0"></path></svg>`,
      'beer': `<svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M17 11h1a3 3 0 0 1 0 6h-1M9 12v6M13 12v6M5 8v12a2 2 0 0 0 2 2h8a2 2 0 0 0 2-2V8"></path></svg>`,
      'wine': `<svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M8 22h8M7 10h10M12 15v7M12 15a5 5 0 0 0 5-5c0-2-.5-4-2-8H9c-1.5 4-2 6-2 8a5 5 0 0 0 5 5Z"></path></svg>`,
      'food': `<svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M3 2v7c0 1.1.9 2 2 2h4a2 2 0 0 0 2-2V2M7 2v20M21 15V2a5 5 0 0 0-5 5v6c0 1.1.9 2 2 2h3v7"></path></svg>`,
      'coffee': `<svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M17 8h1a4 4 0 1 1 0 8h-1M3 8h14v9a4 4 0 0 1-4 4H7a4 4 0 0 1-4-4ZM6 2v2M10 2v2M14 2v2"></path></svg>`
    };

    const MENU_DATA = [
      { type: 'cover', title: 'MENU BAR', subtitle: 'AFPESP Peruíbe II' },
      { type: 'image', url: 'https://images.unsplash.com/photo-1514362545857-3bc16c4c7d1b?q=80&w=1000', caption: 'Bebidas Selecionadas' },
      { 
        type: 'content', 
        sections: [
          { title: 'Doses', icon: 'glass', items: [ { n: 'Pinga 51', p: '4,00' }, { n: 'Velho Barreiro', p: '4,00' }, { n: 'Sagatiba', p: '5,00' }, { n: 'Saquê', p: '6,00' }, { n: 'Vodka (Caipiroska)', p: '5,00' }, { n: 'Campari', p: '7,00' } ] },
          { title: 'Caipirinhas', icon: 'glass', items: [ { n: 'Pinga 51', p: '20,00' }, { n: 'Velho Barreiro', p: '15,00' }, { n: 'Sagatiba', p: '25,00' }, { n: 'Saquê', p: '18,00' }, { n: 'Vodka (Caipiroska)', p: '25,00' } ] }
        ]
      },
      { type: 'image', url: 'https://images.unsplash.com/photo-1535958636474-b021ee887b13?q=80&w=1000', caption: 'Cervejas e Chopp' },
      { 
        type: 'content', 
        sections: [
          { title: 'Cervejas', icon: 'beer', items: [ { n: 'Skol', p: '7,00' }, { n: 'Brahma', p: '7,00' }, { n: 'Brahma Malzbier', p: '9,00' }, { n: 'Heineken', p: '10,00' }, { n: 'Heineken sem álcool', p: '10,00' } ] },
          { title: 'Chopp', icon: 'beer', items: [ { n: 'Chopp Claro 330ml', p: '9,00' }, { n: 'Chopp Claro 500ml', p: '13,50' }, { n: 'Chopp Escuro Garrafa 1L', p: '30,00' } ] }
        ]
      },
      { type: 'image', url: 'https://images.unsplash.com/photo-1510812431401-41d2bd2722f3?q=80&w=1000', caption: 'Vinhos e Momentos' },
      { 
        type: 'content', 
        sections: [
          { title: 'Vinhos', icon: 'wine', items: [ { n: 'Vinho Tinto Seco', p: '8,00' }, { n: 'Vinho Tinto Suave', p: '8,00' }, { n: 'Concha y Toro Meio Seco', p: '50,00' }, { n: 'Periquita Meio Seco', p: '90,00' }, { n: 'Santa Helena Chardonnay', p: '52,00' } ] }
        ]
      },
      { type: 'image', url: 'https://images.unsplash.com/photo-1551024709-8f23befc6f87?q=80&w=1000', caption: 'Bebidas Geladas' },
      { 
        type: 'content', 
        sections: [
          { title: 'Não Alcoólicas', icon: 'glass', items: [ 
            { n: 'Água com gás', p: '5,00' }, 
            { n: 'Água sem gás', p: '5,00' }, 
            { n: 'Coca-Cola (Lata)', p: '7,00' }, 
            { n: 'Coca-Cola (Zero)', p: '7,00' }, 
            { n: 'Guaraná (Lata)', p: '6,00' }, 
            { n: 'Guaraná (Zero)', p: '6,00' }, 
            { n: 'Schweppes', p: '7,00' },
            { n: 'Água tônica', p: '6,00' },
            { n: 'H2O Limão', p: '7,00' }, 
            { n: 'Pacote de Gelo 3kg', p: '6,00' } 
          ] }
        ]
      },
      { type: 'image', url: 'https://images.unsplash.com/photo-1613478223719-2ab802602423?q=80&w=1000', caption: 'Sucos Naturais' },
      { 
        type: 'content', 
        sections: [
          { title: 'Sucos Naturais', icon: 'glass', items: [ 
            { n: 'Suco Laranja/Limão (Copo)', p: '10,00' }, 
            { n: 'Suco Melancia (Copo)', p: '10,00' },
            { n: 'Suco Laranja/Limão (Jarra)', p: '18,00' },
            { n: 'Suco Melancia (Jarra)', p: '18,00' }
          ] },
          { title: 'Sucos (Outros)', icon: 'glass', items: [ 
            { n: 'Suco Uva Integral (Copo)', p: '15,00' }, 
            { n: 'Suco Uva Del Valle (Lata)', p: '8,00' }, 
            { n: 'Suco Pêssego Del Valle (Lata)', p: '8,00' } 
          ] }
        ]
      },
      { type: 'image', url: 'https://images.unsplash.com/photo-1495474472287-4d71bcdd2085?q=80&w=1000', caption: 'Especiais e Lanches' },
      { 
        type: 'content', 
        sections: [
          { title: 'Especiais', icon: 'coffee', items: [ { n: 'Copo de Leite Longo', p: '5,00' }, { n: 'Café Expresso Pequeno', p: '5,00' }, { n: 'Espanhola Sem Álcool', p: '8,00' }, { n: 'Especial Peruíbe II', p: '8,00' } ] },
          { title: 'Lanches', icon: 'food', items: [ { n: 'Misto Quente', p: '7,00' }, { n: 'Misto Frio', p: '10,00' }, { n: 'Queijo Quente', p: '10,00' } ] }
        ]
      },
      { type: 'image', url: 'https://i.ibb.co/99h3wM28/porcao-de-camarao-frito.jpg', caption: 'Petiscos e Pratos' },
      { 
        type: 'content', 
        sections: [
          { title: 'Porções', icon: 'food', items: [ 
            { n: 'Batata Frita 200g/400g', p: '15,00 / 20,00' }, 
            { n: 'Camarão 250g/500g', p: '40,00 / 55,00' }, 
            { n: 'Isca de Peixe 500g', p: '45,00' }, 
            { n: 'Calabresa Acebolada 400g', p: '18,00' } 
          ] },
          { title: 'Pratos Extras', icon: 'food', items: [ 
            { n: 'Omelete (Simples/Queijo)', p: '4,00 / 5,00' }, 
            { n: 'Ovo (Cozido/Frito)', p: '2,00 / 3,00' }, 
            { n: 'Filé de Frango', p: '5,00' }, 
            { n: 'Bife Grelhado', p: '9,00' } 
          ] }
        ]
      },
      { type: 'back', title: 'VOLTE SEMPRE', subtitle: 'Bar AFPESP Peruíbe II' }
    ];

    let currentSheet = 0;
    let isAnimating = false;
    const book = document.getElementById('book');
    const container = document.getElementById('book-container');
    const indicator = document.getElementById('page-indicator');
    const sheets = [];

    function initBook() {
      book.innerHTML = '';
      sheets.length = 0;
      for (let i = 0; i < MENU_DATA.length; i += 2) {
        const sheet = document.createElement('div');
        sheet.className = 'sheet';
        const z = Math.floor((MENU_DATA.length - i) / 2);
        sheet.style.zIndex = z;
        sheet.dataset.originalZ = z;
        
        const front = document.createElement('div');
        front.className = 'face front';
        setupFace(front, MENU_DATA[i]);
        
        const back = document.createElement('div');
        back.className = 'face back';
        setupFace(back, MENU_DATA[i+1]);
        
        sheet.appendChild(front);
        sheet.appendChild(back);
        book.appendChild(sheet);
        sheets.push(sheet);
      }
      updateIndicator();
      setTimeout(() => { container.style.opacity = '1'; }, 200);
    }

    function setupFace(faceEl, data) {
      if (!data) {
        faceEl.classList.add('bg-leather');
        return;
      }

      if (data.type === 'cover' || data.type === 'back') {
        faceEl.classList.add('bg-leather');
        const svgKey = data.type === 'cover' ? 'chef-hat' : 'heart';
        faceEl.innerHTML = `
          <div class="cover-content">
            <div style="margin-bottom: 15px;">${SVGS[svgKey]}</div>
            <h1>${data.title}</h1>
            <div class="gold-line"></div>
            <p>${data.subtitle}</p>
          </div>`;
      } else if (data.type === 'image') {
        faceEl.innerHTML = `
          <div class="image-container">
            <img class="image-el" src="${data.url}" alt="${data.caption}" loading="eager" />
            <div class="image-caption">
              <h3>${data.caption}</h3>
            </div>
          </div>`;
      } else {
        const content = data.sections.map(s => `
          <div class="menu-section">
            <div class="section-title">${SVGS[s.icon] || ''} ${s.title}</div>
            ${s.items.map(item => `
              <div class="menu-item">
                <span class="item-name">${item.n}</span>
                <div class="item-dots"></div>
                <span class="item-price">R$ ${item.p}</span>
              </div>
            `).join('')}
          </div>
        `).join('');
        faceEl.innerHTML = `<div class="page-content">${content}</div>`;
      }
    }

    // Função para tratar o clique direto no livro
    function handleBookClick(e) {
      if (isAnimating) return;
      
      const rect = container.getBoundingClientRect();
      const clickX = e.clientX - rect.left;
      
      // Se clicar na metade esquerda, volta. Se clicar na direita, avança.
      if (clickX < rect.width / 2) {
        prevPage();
      } else {
        nextPage();
      }
    }

    function nextPage() {
      if (currentSheet < sheets.length && !isAnimating) {
        isAnimating = true;
        const sheet = sheets[currentSheet];
        sheet.classList.add('flipped');
        sheet.style.zIndex = 100 + currentSheet;
        currentSheet++;
        updateIndicator();
        setTimeout(() => { isAnimating = false; }, 800);
      }
    }

    function prevPage() {
      if (currentSheet > 0 && !isAnimating) {
        isAnimating = true;
        currentSheet--;
        const sheet = sheets[currentSheet];
        //  z-index alto para a animação de retorno ser limpa
        sheet.style.zIndex = 200; 
        sheet.classList.remove('flipped');
        updateIndicator();
        
        setTimeout(() => { 
          sheet.style.zIndex = sheet.dataset.originalZ;
          isAnimating = false; 
        }, 800);
      }
    }

    function updateIndicator() {
      indicator.innerText = `${currentSheet + 1} / ${sheets.length}`;
    }

    window.onload = initBook;
  </script>
</body>
</html>
